/*!
   mason_viewer.js

      github.com/yeastrc/mason

  The Mason Viewer is created by calling MasonViewer.createMasonViewer = function ( $rootDiv, requestParams, configParams, callbackFunctionsObj ) {
          where MasonViewer is an object at window.MasonViewer.

   configParams is merged with the following parameters

	MasonViewerPerInstanceRenderOnPage.prototype.configDisplayOptionDefaults = {

		TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE : 2,

		LABEL_FONT_SIZE : 12,
		
		ROW_HEIGHT : 15, //  Adjust the ROW_HEIGHT to accommodate the height of the label

		BLOCK_HEIGHT : 14,  //  Adjust the BLOCK_HEIGHT to accommodate the height of the label


		LABEL_WIDTH : 100,  //  Adjust the LABEL_WIDTH to accommodate the width of the longest label

		ICON_EXPAND_ROW_STARTING_POSITION : 1,
		ICON_EXPAND_ROW_WIDTH : 15,

		ICON_EXPAND_ROW_SPACE_AFTER : 2,

		ROW_TOTALS_BAR_RIGHT_MAX_WIDTH : 30,

		ROW_TOTAL_BLOCK_MINIMUM_SIZE : 1,

		ROW_TOTALS_BAR_RIGHT_SPACE_FROM_MAIN_GRID : 10,

		ROW_TOTALS_BAR_RIGHT_SPACE_FROM_RIGHT_EDGE : 4,


		BORDER_COLOR : "black",

		BORDER_WIDTH : 1,

		FOOTER_HEIGHT : 2,



		//  Tool tip text


		CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX : "Click to hide individual ",

		CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX : "Click to show individual ",


		blockTypeLabelPlural : "blocks",

		BLOCK_HIGHLIGHT_BORDER_COLOR : "pink",
		BLOCK_HIGHLIGHT_BORDER_WIDTH : 2,


		createCombinedLineOnly : undefined,  //  set to true to only create combined line

		skipCreateCombinedLine : undefined,  //  set to true to skip create combined line

		combinedLineLabel : "Combined",  //  label on left for combined line

		combinedLineTooltipHTML : undefined,  //  tool tip for label on left for combined line

		ALIGNMENT_LINE_COLOR : "black",
		ALIGNMENT_LINE_WIDTH : 2

	};


*/
(function(e){var c=function(){};c.prototype.instanceCounter=0;c.prototype.createMasonViewer=function(k,l,g,n){if(k===undefined||k===null){throw"$rootDiv is missing or null"}if(l===undefined||l===null){throw"requestParams is missing or null"}if(g===undefined||g===null){throw"configParams is missing or null"}if(n===undefined||n===null){throw"callbackFunctionsObj is missing or null"}var i=k.length;if(i!=1){throw"Error calling 'MasonViewer.createMasonViewer': $rootDiv must contain exactly one element"}var m=Modernizr.svg;if(!m){throw"SVG not supported"}this.instanceCounter++;var j={masonViewerMain:this,instanceCounter:this.instanceCounter};var h=new f(k,l,g,n,j);return h};c.prototype.getDataElement=function(){return"MasonViewer"};c.prototype.getProtCovObjectStorageClassName=function(){return"ProtCovObjectStorageClass"};var c=new c();e.MasonViewer=c;"use strict";"use strict";var f=function(m,p,n,i,q){var j=this;var k=m.length;if(k!=1){throw"Error calling 'MasonViewer.createMasonViewer': $rootDiv must contain exactly one element"}var g=q.masonViewerMain;var h='	<div class="'+g.getProtCovObjectStorageClassName()+'" >';$(h).appendTo(m);var l="."+g.getProtCovObjectStorageClassName();var r=m.children(l);if(r.size()===0){throw"Unable to find protCovObjectStorageNode under $rootDiv, protCovObjectStorageNodeSelector = "+l}r.data(g.getDataElement(),this);var s=j.reformatDataToInternalFormat(p);var o=j.computeRepresentation(m,s,p,n);j.renderViewerOnThePage(m,o,p,n,i,q)};f.prototype.renderViewerOnThePage=function(j,l,k,g,m,i){var h=this;this.masonViewerPerInstanceRenderOnPage=new b(j,l,k,g,m,i,h);this.masonViewerPerInstanceRenderOnPage.renderViewerOnThePageMain()};f.prototype.MESSAGE_TYPE_RENDER_ON_PAGE="RENDER_ON_PAGE";f.prototype.hideVerticalDataLines=function(){this.masonViewerPerInstanceRenderOnPage.hideVerticalDataLines()};f.prototype.showVerticalDataLines=function(){this.masonViewerPerInstanceRenderOnPage.showVerticalDataLines()};f.prototype.deleteViewer=function(){this.masonViewerPerInstanceRenderOnPage.deleteViewer()};f.prototype.acceptMessage=function(g){if(g.type===f.prototype.MESSAGE_TYPE_RENDER_ON_PAGE){this.masonViewerPerInstanceRenderOnPage.acceptMessage(g.data)}else{throw"unknown type in message at 'MasonViewerPerInstance.prototype.acceptMessage'.  type: "+g.type}};f.prototype.registerBlockHoverListener=function(g){this.masonViewerPerInstanceRenderOnPage.registerBlockHoverListener(g)};"use strict";f.prototype.computeRepresentation=function(l,s,p,m){var h=this;var q={outputRows:[]};var j=q.outputRows;var r=s;var o=r.rowItems;for(var i=0;i<o.length;i++){var n=o[i];var u=n.blockItems;var t=h.combineOverlapsProteinPositionBased(u);var k=t.outputList;var g={label:n.label,mainLineBlocks:k,blockItems:u,splitAnyEntries:t.splitAnyEntries,inputRowItem:n.inputRowItem,vertLinesItems:n.vertLinesItems};j.push(g)}return q};"use strict";f.prototype.combineOverlaps_Z_compareForSortBlocks=function(h,g){if(h.blockStartPos===g.blockStartPos){return g.blockEndPos-h.blockEndPos}return h.blockStartPos-g.blockStartPos};f.prototype.copyArray=function(g){var h=g.concat();return h};f.prototype.concatArrays=function(h,g){var i=h.concat(g);return i};f.prototype.combineOverlapsProteinPositionBased=function(n){var r=false;var q=true;var i=0;var l=null;var h=this.combineEntriesProteinPositionBased(i,n);while(q){i++;if(i>200){var m="combineOverlapsProteinPositionBased(...):  numTimesSplitAnEntryLoop > 200 so throwing exception.  ";throw m}q=false;l=h;h=[];l.sort(this.combineOverlaps_Z_compareForSortBlocks);var o=-1;while((++o)<l.length){var p=l[o];if(o===(l.length-1)){h.push(p)}else{var s=l[o+1];if(p.blockEndPos<s.blockStartPos){h.push(p)}else{q=true;r=true;if(p.blockStartPos===s.blockStartPos){var g={blockDataItems:this.copyArray(p.blockDataItems),blockStartPos:p.blockStartPos,blockEndPos:s.blockEndPos};var k={blockDataItems:this.copyArray(p.blockDataItems),blockStartPos:s.blockEndPos+1,blockEndPos:p.blockEndPos};h.push(g);h.push(k)}else{var g={blockDataItems:this.copyArray(p.blockDataItems),blockStartPos:p.blockStartPos,blockEndPos:(s.blockStartPos-1)};var k={blockDataItems:this.copyArray(p.blockDataItems),blockStartPos:s.blockStartPos,blockEndPos:p.blockEndPos};
h.push(g);h.push(k)}}}}h=this.combineEntriesProteinPositionBased(i,h)}var j={splitAnyEntries:r,outputList:h};return j};f.prototype.combineEntriesProteinPositionBased=function(k,h){var i=[];var j;h.sort(this.combineOverlaps_Z_compareForSortBlocks);j=-1;while((++j)<h.length){var m=h[j];if(j===(h.length-1)){i.push(m)}else{var g=j;while((++g)<h.length){var l=h[g];if(m.blockStartPos===l.blockStartPos&&m.blockEndPos===l.blockEndPos){j=g;m.blockDataItems=this.concatArrays(m.blockDataItems,l.blockDataItems)}else{break}}i.push(m)}}return i};"use strict";f.prototype.reformatDataToInternalFormat=function(o){var r=o.inputData;if(!r){throw"requestParams.inputData is missing or null"}if(r.maxSequenceLength===undefined||r.maxSequenceLength===null||typeof r.maxSequenceLength!=="number"){throw"requestParams.inputData.maxSequenceLength is missing or null or is not a number"}var q=[];var m={maxSequenceLength:r.maxSequenceLength,rowItems:q,vertLinesAllRowsItems:r.vertLinesAllRowsItems};var n=r.rowItems;if(!r.rowItems){throw"requestParams.inputData.rowItems is missing or null"}if(r.rowItems.length===0){throw"requestParams.inputData.rowItems is empty"}for(var h=0;h<n.length;h++){var p=n[h];if(p.label===undefined||p.label===null||p.label===""){throw"requestParams.inputData.rowItems.rowItem[ index ].label is missing or null or is empty for index = "+h}var l=[];var s=p.blockItems;if(!s){throw"requestParams.inputData.rowItems.rowItem[ index ].blockItems is missing or null for index = "+h}for(var g=0;g<s.length;g++){var k=s[g];if(k.startPos===undefined){throw"requestParams.inputData.rowItems.rowItem[ rowItemsIdx ].blockItem[ blockItemsIdx ] is missing property 'startPos' rowItemsIdx = "+h+", and blockItemsIdx = "+g}if(k.endPos===undefined){throw"requestParams.inputData.rowItems.rowItem[ rowItemsIdx ].blockItem[ blockItemsIdx ] is missing property 'endPos' rowItemsIdx = "+h+", and blockItemsIdx = "+g}if(k.blockData===undefined){throw"requestParams.inputData.rowItems.rowItem[ rowItemsIdx ].blockItem[ blockItemsIdx ] is missing property 'blockData' rowItemsIdx = "+h+", and blockItemsIdx = "+g}var i={blockStartPos:k.startPos,blockEndPos:k.endPos,blockDataItems:[k.blockData]};l.push(i)}var j={label:p.label,blockItems:l,inputRowItem:p,vertLinesItems:p.vertLinesItems};q.push(j)}return m};"use strict";var a=function(){this.SVGGroup=undefined;this.firstOutputRowSVGGroup=undefined;this.nextProgramaticDataStorageGroupOfRows=undefined};a.prototype.getSVGGroup=function(){return this.SVGGroup};a.prototype.setSVGGroup=function(g){this.SVGGroup=g};a.prototype.getFirstOutputRowSVGGroup=function(){return this.firstOutputRowSVGGroup};a.prototype.setFirstOutputRowSVGGroup=function(g){this.firstOutputRowSVGGroup=g};a.prototype.getNextProgramaticDataStorageGroupOfRows=function(){return this.nextProgramaticDataStorageGroupOfRows};a.prototype.setNextProgramaticDataStorageGroupOfRows=function(g){this.nextProgramaticDataStorageGroupOfRows=g};var d=function(){this.outputRow=undefined;this.rowIdx=undefined;this.rowOffset=undefined;this.createHiddenBlocksIfNotCreatedCallback=undefined;this.SVGRowXmainBlocksGROUP=undefined;this.groupToMoveForExpansion=undefined;this.hiddenBlocksVisible=false;this.hiddenBlocksForRowSet=undefined;this.hiddenBlocksHeight=0;this.SVGGroupExpansionIcon=undefined;this.mainBlocksBoxUnderEachRow=undefined;this.hiddenBlocksBoxUnderEachRow=undefined;this.toolTipHTML=undefined};d.prototype.getCreateHiddenBlocksIfNotCreatedCallback=function(){return this.createHiddenBlocksIfNotCreatedCallback};d.prototype.setCreateHiddenBlocksIfNotCreatedCallback=function(g){this.createHiddenBlocksIfNotCreatedCallback=g};d.prototype.getOutputRow=function(){return this.outputRow};d.prototype.setOutputRow=function(g){this.outputRow=g};d.prototype.getRowOffset=function(){return this.rowOffset};d.prototype.setRowOffset=function(g){this.rowOffset=g};d.prototype.getRowIdx=function(){return this.rowIdx};d.prototype.setRowIdx=function(g){this.rowIdx=g};d.prototype.getSVGRowXmainBlocksGROUP=function(){return this.SVGRowXmainBlocksGROUP};d.prototype.setSVGRowXmainBlocksGROUP=function(g){this.SVGRowXmainBlocksGROUP=g};d.prototype.getGroupToMoveForExpansion=function(){return this.groupToMoveForExpansion};d.prototype.setGroupToMoveForExpansion=function(g){this.groupToMoveForExpansion=g};d.prototype.getHiddenBlocksVisible=function(){return this.hiddenBlocksVisible};d.prototype.setHiddenBlocksVisible=function(g){this.hiddenBlocksVisible=g};d.prototype.getHiddenBlocksForRowSet=function(){return this.hiddenBlocksForRowSet};d.prototype.setHiddenBlocksForRowSet=function(g){this.hiddenBlocksForRowSet=g};d.prototype.getHiddenBlocksHeight=function(){return this.hiddenBlocksHeight};d.prototype.setHiddenBlocksHeight=function(g){this.hiddenBlocksHeight=g};d.prototype.getSVGGroupExpansionIcon=function(){return this.SVGGroupExpansionIcon};d.prototype.setSVGGroupExpansionIcon=function(g){this.SVGGroupExpansionIcon=g};d.prototype.getMainBlocksBoxUnderEachRow=function(){return this.mainBlocksBoxUnderEachRow};d.prototype.setMainBlocksBoxUnderEachRow=function(g){this.mainBlocksBoxUnderEachRow=g};d.prototype.getHiddenBlocksBoxUnderEachRow=function(){return this.hiddenBlocksBoxUnderEachRow};d.prototype.setHiddenBlocksBoxUnderEachRow=function(g){this.hiddenBlocksBoxUnderEachRow=g};d.prototype.getToolTipHTML=function(){return this.toolTipHTML};d.prototype.setToolTipHTML=function(g){this.toolTipHTML=g};"use strict";var b=function(i,k,j,g,m,h,l){this.constructorParams={$rootDiv:i,data:k,requestParams:j,configParams:g,callbackFunctionsObj:m,internalParams:h,objectThisMasonViewerPerInstance:l};this.configDisplayOptions={};$.extend(this.configDisplayOptions,b.prototype.configDisplayOptionDefaults,g);this.configDisplayOptions.LABEL_STARTING_POSITION=this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH+this.configDisplayOptions.ICON_EXPAND_ROW_SPACE_AFTER;this.configDisplayOptions.MAIN_BOX_STARTING_POSITION=this.configDisplayOptions.LABEL_STARTING_POSITION+this.configDisplayOptions.LABEL_WIDTH;
this.configDisplayOptions.CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT=this.configDisplayOptions.CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX+this.configDisplayOptions.blockTypeLabelPlural;this.configDisplayOptions.CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT=this.configDisplayOptions.CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX+this.configDisplayOptions.blockTypeLabelPlural;this.GLOBALS={masonViewerSVG:undefined,overallWidth:undefined,sequenceWidth:undefined,sequenceMultiplier:undefined,rowsPerGroup:undefined,viewerHeightInsideTheBox:undefined,arrayOfcurrentSVGgroupOfRowXandBelow:[],setSVGVerticalDataLines:undefined,setSVGVerticalDataFullHeightLines:undefined,showVerticalDataLines:true};this.GLOBALS.MAIN_BOX_STARTING_POSITION=this.configDisplayOptions.MAIN_BOX_STARTING_POSITION};b.prototype.renderViewerOnThePageMain=function(){this.createSVG_Lib_Instance();this.putDataOnThePageMain();this.resizeOverallImageLength()};b.prototype.createSVG_Lib_Instance=function(){var h=this.constructorParams.$rootDiv.width();var k=this.constructorParams.$rootDiv[0];try{this.GLOBALS.masonViewerSVG=SVG(k).size(h,5)}catch(j){var i=j.stack;throw"Exception creating SVG.  "+i}this.GLOBALS.setSVGVerticalDataLines=this.GLOBALS.masonViewerSVG.set();this.GLOBALS.overallWidth=h;this.GLOBALS.rowTotalsBarRightStartingPoint=h-(this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH+this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_SPACE_FROM_RIGHT_EDGE);this.GLOBALS.sequenceWidth=h-(this.configDisplayOptions.LABEL_STARTING_POSITION+this.configDisplayOptions.LABEL_WIDTH)-(this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH+this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_SPACE_FROM_MAIN_GRID+this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_SPACE_FROM_RIGHT_EDGE);this.GLOBALS.sequenceMultiplier=this.GLOBALS.sequenceWidth/(this.constructorParams.requestParams.inputData.maxSequenceLength),this.GLOBALS.leftLineX=this.configDisplayOptions.MAIN_BOX_STARTING_POSITION-0.5;this.GLOBALS.rightLineX=this.configDisplayOptions.MAIN_BOX_STARTING_POSITION+this.GLOBALS.sequenceWidth+0.5;var g=this.constructorParams.data.outputRows.length;this.GLOBALS.rowsPerGroup=Math.floor(Math.sqrt(g));if(this.GLOBALS.rowsPerGroup<b.prototype.CONSTANTS.MIN_MAX_VALUES.MINIMUM_ROWS_PER_GROUP){this.GLOBALS.rowsPerGroup=b.prototype.CONSTANTS.MIN_MAX_VALUES.MINIMUM_ROWS_PER_GROUP}if(b.prototype.CONSTANTS.MIN_MAX_VALUES.MAXIMUM_ROWS_PER_GROUP){if(this.GLOBALS.rowsPerGroup>b.prototype.CONSTANTS.MIN_MAX_VALUES.MAXIMUM_ROWS_PER_GROUP){this.GLOBALS.rowsPerGroup=b.prototype.CONSTANTS.MIN_MAX_VALUES.MAXIMUM_ROWS_PER_GROUP}}};b.prototype.putDataOnThePageMain=function(){var n=this.constructorParams.data.outputRows;this.add_callbackDataStorage_ToElementsIn_outputRows(n);var k=this.GLOBALS.masonViewerSVG.group();k.attr("label","SVGrootGroupInsideBoundingBox");var j=this.GLOBALS.masonViewerSVG.group();this.setupGroupOfRows(j);var l=this.getProgramaticDataStorageFromSVG_js_Item(j);k.add(j);var m=this.GLOBALS.masonViewerSVG.group();this.setupRootGroupForEachRow(m);var i=this.getProgramaticDataStorageFromSVG_js_Item(m);i._type="currentSVGgroupOfRowXandBelow";i._attachedTo=m;j.add(m);l.setFirstOutputRowSVGGroup(m);var u=0;if(this.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions&&(n.length>1||this.configDisplayOptions.createCombinedLineOnly)&&!this.configDisplayOptions.skipCreateCombinedLine){this.processCombinedRow(n,0,m,i);s=this.GLOBALS.masonViewerSVG.group();s.attr("label","nextSVGgroupOfRowXandBelow");m.add(s);i.setGroupToMoveForExpansion(s);m=s;this.setupRootGroupForEachRow(m);i=this.getProgramaticDataStorageFromSVG_js_Item(m);i._type="currentSVGgroupOfRowXandBelow";i._attachedTo=m;u=1}this.precomputeValuesOnCreateForMainRows(n);var t=0;if(this.configDisplayOptions.createCombinedLineOnly!==true){t=n.length;for(var h=0;h<n.length;h++){var p=h+u;var g=n[h];m.data("row-rowIdx",h);var i=this.getProgramaticDataStorageFromSVG_js_Item(m);i._type="currentSVGgroupOfRowXandBelow";i._attachedTo=m;i.setOutputRow(g);i.setRowIdx(h);i.setRowOffset(p);var r=this.GLOBALS.masonViewerSVG.group();m.add(r);r.attr("label","SVGRowXmainBlocksGROUP");i.setSVGRowXmainBlocksGROUP(r);this.addBoxUnderEachRowForMouseOver(r,i,p);this.processLabelForRow(g,m,p);var v=g.splitAnyEntries;if(v){this.createMainLineHiddenBlocksIfNotCreatedCallbackCreator(g,m,i,p);this.createHiddenBlocksExpansionIcon(this.configDisplayOptions.CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT,r,p,i)}this.processMainLineBlocksForRow(g,m,r,p);this.processRowTotalBlockForRow(g,m,p);var s=this.GLOBALS.masonViewerSVG.group();s.attr("label","nextSVGgroupOfRowXandBelow");this.setupRootGroupForEachRow(s);if(h>0&&(h%this.GLOBALS.rowsPerGroup===0)){var o=this.GLOBALS.masonViewerSVG.group();this.setupGroupOfRows(o);var q=this.getProgramaticDataStorageFromSVG_js_Item(o);j.add(o);l.setNextProgramaticDataStorageGroupOfRows(q);j=o;l=q;j.add(s);l.setFirstOutputRowSVGGroup(s)}else{m.add(s);i.setGroupToMoveForExpansion(s)}m=s}}this.addFullHeightLines();this.addBottomLineAndBottomScale(m,t);this.addTopLine(k)};b.prototype.addTopLine=function(g){var h=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX-0.5,this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX+0.5,this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});g.add(h)};b.prototype.addBottomLineAndBottomScale=function(j,i){var l=(i+1)*this.configDisplayOptions.ROW_HEIGHT;if(i<=1||this.configDisplayOptions.skipCreateCombinedLine){l=(i)*this.configDisplayOptions.ROW_HEIGHT}if(this.configDisplayOptions.createCombinedLineOnly){l=(i+1)*this.configDisplayOptions.ROW_HEIGHT}var k=this.GLOBALS.masonViewerSVG.text("1");var g=(l)+(this.configDisplayOptions.ROW_HEIGHT/2);g=g+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;this.setSVGTextPosition({textSVG:k,x:this.GLOBALS.leftLineX,y:g});
var n=this.constructorParams.requestParams.inputData.maxSequenceLength+"";var h=this.GLOBALS.masonViewerSVG.text(n);this.clearStyleAnd_dy_OnSVGtextItem(h);var g=(l)+(this.configDisplayOptions.ROW_HEIGHT/2);g=g+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;this.setSVGTextPosition({textSVG:h,x:this.GLOBALS.rightLineX,y:g,otherAttrsToSet:[{attrName:"text-anchor",attrValue:"end"}]});var m=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX-0.5,(l)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX+0.5,(l)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});j.add(k);j.add(h);j.add(m)};b.prototype.resizeOverallImageLength=function(){var l=this.constructorParams.data.outputRows.length;if(l>1&&(!this.configDisplayOptions.skipCreateCombinedLine)){l+=1}if(this.configDisplayOptions.createCombinedLineOnly){l=1}var m=this.configDisplayOptions.ROW_HEIGHT*l;var n=0;for(var i=0;i<this.GLOBALS.arrayOfcurrentSVGgroupOfRowXandBelow.length;i++){var k=this.GLOBALS.arrayOfcurrentSVGgroupOfRowXandBelow[i];var j=this.getProgramaticDataStorageFromSVG_js_Item(k);if(j.getHiddenBlocksVisible()){n+=j.getHiddenBlocksHeight()}}var h=m+n;this.GLOBALS.viewerHeightInsideTheBox=h;var g=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE+h+this.configDisplayOptions.ROW_HEIGHT+this.configDisplayOptions.FOOTER_HEIGHT;this.GLOBALS.masonViewerSVG.size(this.GLOBALS.overallWidth,g);this.updateFullHeightLines()};b.prototype.showHideAllVerticalDataLinesPer_GLOBALS_showVerticalDataLines=function(){if(this.GLOBALS.showVerticalDataLines){this.constructorParams.objectThisMasonViewerPerInstance.showVerticalDataLines()}else{this.constructorParams.objectThisMasonViewerPerInstance.hideVerticalDataLines()}};"use strict";b.prototype.configDisplayOptionDefaults={TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE:2,LABEL_FONT_SIZE:12,ROW_HEIGHT:15,BLOCK_HEIGHT:14,LABEL_WIDTH:100,ICON_EXPAND_ROW_STARTING_POSITION:1,ICON_EXPAND_ROW_WIDTH:15,ICON_EXPAND_ROW_SPACE_AFTER:2,ROW_TOTALS_BAR_RIGHT_MAX_WIDTH:30,ROW_TOTAL_BLOCK_MINIMUM_SIZE:1,ROW_TOTALS_BAR_RIGHT_SPACE_FROM_MAIN_GRID:10,ROW_TOTALS_BAR_RIGHT_SPACE_FROM_RIGHT_EDGE:4,BORDER_COLOR:"black",BORDER_WIDTH:1,FOOTER_HEIGHT:2,CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX:"Click to hide individual ",CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT_PREFIX:"Click to show individual ",blockTypeLabelPlural:"blocks",BLOCK_HIGHLIGHT_BORDER_COLOR:"pink",BLOCK_HIGHLIGHT_BORDER_WIDTH:2,createCombinedLineOnly:undefined,skipCreateCombinedLine:undefined,combinedLineLabel:"Combined",combinedLineTooltipHTML:undefined,ALIGNMENT_LINE_COLOR:"black",ALIGNMENT_LINE_WIDTH:2};"use strict";b.prototype.deleteViewer=function(){var g=this.constructorParams.$rootDiv.find("svg");g.remove()};b.prototype.hideVerticalDataLines=function(){this.GLOBALS.setSVGVerticalDataLines.hide();this.GLOBALS.showVerticalDataLines=false};b.prototype.showVerticalDataLines=function(){this.GLOBALS.setSVGVerticalDataLines.show();this.GLOBALS.showVerticalDataLines=true};b.prototype.MESSAGE_TYPE_REMOVE_ALIGNMENTS="REMOVE_ALIGNMENTS";b.prototype.MESSAGE_TYPE_ADD_ALIGNMENTS="ADD_ALIGNMENTS";b.prototype.acceptMessage=function(g){if(g.type===b.prototype.MESSAGE_TYPE_REMOVE_ALIGNMENTS){this.removeAlignmentLines(g.data)}else{if(g.type===b.prototype.MESSAGE_TYPE_ADD_ALIGNMENTS){this.addAlignmentLines(g.data)}else{throw"unknown type in message at 'MasonViewerPerInstanceRenderOnPage.prototype.acceptMessage'.  type: "+g.type}}};b.prototype.removeAlignmentLines=function(g){if(this.GLOBALS.setSVGAlignmentLines){this.GLOBALS.setSVGAlignmentLines.each(function(h){this.remove()});this.GLOBALS.setSVGAlignmentLines.clear()}};b.prototype.addAlignmentLines=function(j){var i=this.GLOBALS.viewerHeightInsideTheBox;this.GLOBALS.setSVGAlignmentLines=this.GLOBALS.masonViewerSVG.set();var k=j.linePosArray;for(var n=0;n<k.length;n++){var r=k[n];var m=this.positionCharPositionToPixel(r);var g=m+this.GLOBALS.MAIN_BOX_STARTING_POSITION;var h=this.configDisplayOptions.ALIGNMENT_LINE_WIDTH/2;var q=g-h;var p=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var o=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE+i;var l=this.GLOBALS.masonViewerSVG.line(q,p,q,o).stroke({color:this.configDisplayOptions.ALIGNMENT_LINE_COLOR,width:this.configDisplayOptions.ALIGNMENT_LINE_WIDTH});this.GLOBALS.setSVGAlignmentLines.add(l)}};b.prototype.registerBlockHoverListener=function(h){var g=h.hoverListener;if(!this.blockHoverCallList){this.blockHoverCallList=[]}this.blockHoverCallList.push(g)};b.prototype.callListenersForBlockMouseEnter=function(i){if(this.blockHoverCallList){var m=i.blockInfo;var k=m.startPos;var g=m.endPos;var n=this.limitCharPositionMaxSeqLength(k-0.5);var l=this.limitCharPositionMaxSeqLength(g+0.5);var h={linePosArray:[n,l]};var p=this.createAddAlignmentsMessage(h);for(var o=0;o<this.blockHoverCallList.length;o++){var j=this.blockHoverCallList[o];j.passMessage(p)}}};b.prototype.callListenersForBlockMouseLeave=function(j){if(this.blockHoverCallList){var h=this.createRemoveAlignmentsMessage({});for(var i=0;i<this.blockHoverCallList.length;i++){var g=this.blockHoverCallList[i];g.passMessage(h)}}};b.prototype.createAddAlignmentsMessage=function(h){var i={type:b.prototype.MESSAGE_TYPE_ADD_ALIGNMENTS,data:h};var g=this.createMessage(i);return g};b.prototype.createRemoveAlignmentsMessage=function(h){var i={type:b.prototype.MESSAGE_TYPE_REMOVE_ALIGNMENTS,data:h};var g=this.createMessage(i);return g};b.prototype.createMessage=function(h){var g={type:f.prototype.MESSAGE_TYPE_RENDER_ON_PAGE,data:h};return g};"use strict";b.prototype.animateTransformY=function(i){var j=i.SVGoGroupToMove;var g=i.yToTransformTo;var h=i.functionToRunAfterAnimate;j.animate({duration:150,ease:"-",delay:0}).transform({y:g}).after(h)};"use strict";b.prototype.CONSTANTS={MIN_MAX_VALUES:{MINIMUM_ROWS_PER_GROUP:20},CLASSES:{PROT_COV_VIEWER_GROUP_OR_ROWS:"prot_cov_viewer_group_of_rows",PROT_COV_VIEWER_GROUP_ROW_MAIN:"prot_cov_viewer_group_row_main",PROT_COV_VIEWER_GROUP_ROW_VISIBLE:"prot_cov_viewer_group_row_visible"},JQUERY_DATA_LABELS:{JQUERY_DATA_LABEL_PROGRAMATIC:"programatic"}};
"use strict";b.prototype.addFullHeightLines=function(){var i=this;var g=0;var v=this.constructorParams.requestParams.inputData.vertLinesAllRowsItems;if(v&&v.length>0&&i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions.getColorForLine){this.GLOBALS.setSVGVerticalDataFullHeightLines=this.GLOBALS.masonViewerSVG.set();for(var s=0;s<v.length;s++){var k=v[s];var q=k.linePos;var j=k.vertLineData;if(j===undefined||j===null){throw" inputData.vertLinesAllRowsItems[ vertLinesAllRowsItemsIdx ].vertLineData is empty or null for vertLinesAllRowsItemsIdx = "+s}if(q===undefined||q===null){throw" inputData.vertLinesAllRowsItems[ vertLinesAllRowsItemsIdx ].linePos is empty or null for vertLinesAllRowsItemsIdx = "+s}k.callbackDataStorage={};if(i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate){var t={vertLineData:j,linePos:q,callbackDataStorage:k.callbackDataStorage};i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate(t)}var m=this.positionCharPositionToPixel(q);var p=m+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var o=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var n=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE+this.configDisplayOptions.ROW_HEIGHT;var r={vertLineData:j,callbackDataStorage:k.callbackDataStorage,forHiddenLines:false};var u=i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions.getColorForLine(r);this.isValidColor(u);var l=this.GLOBALS.masonViewerSVG.line(p,o,p,n).stroke({color:u,width:this.configDisplayOptions.BORDER_WIDTH});this.GLOBALS.setSVGVerticalDataLines.add(l);this.GLOBALS.setSVGVerticalDataFullHeightLines.add(l);this.addProgramaticDataStorageToSVG_js_Item(l);l.data("row-rowIdx",g);l.data("placement","primary row lines");l.data("block-id",k.id);var h={verticalLineSVG:l,lineData:k,callbackFunctions:i.constructorParams.callbackFunctionsObj.allRowsVerticalLines_callbackFunctions};this.attachMouseOverVerticalLine(h)}}};b.prototype.updateFullHeightLines=function(h){if(this.GLOBALS.setSVGVerticalDataFullHeightLines){var g=this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE+this.GLOBALS.viewerHeightInsideTheBox;this.GLOBALS.setSVGVerticalDataFullHeightLines.each(function(i){this.attr("y2",g)})}};"use strict";b.prototype.convertBlockColorTo_SVGJS_FillColor=function(h){if(h===undefined||h===null){throw"ERROR: colorForBlock === undefined || colorForBlock === null"}if(typeof h=="string"||h instanceof String){this.isValidColor(h);return h}else{var g=this.roundAndValidateColor(h);var i={r:g.red,g:g.green,b:g.blue};return i}throw"Code error in 'convertBlockColorTo_SVGJS_FillColor', should have returned by this point: value passed is: "+h};b.prototype.isValidColor=function(g){if(typeof g=="string"||g instanceof String){}else{throw"'isValidColor' only valid for string input.  colorParam: "+g}if(/^#[a-f0-9]{6}$/i.test(g)){return}throw"color is a string but is not a valid hex color with 6 positions  (e.g. #ff0066): value passed is: "+g};b.prototype.roundAndValidateColor=function(h){if(h===undefined||h===null){throw"ERROR: colorForBlock === undefined || colorForBlock === null"}if(h.red===undefined||h.red===null){throw"ERROR: colorForBlock.red === undefined || colorForBlock.red === null"}if(h.green===undefined||h.green===null){throw"ERROR: colorForBlock.green === undefined || colorForBlock.green === null"}if(h.blue===undefined||h.blue===null){throw"ERROR: colorForBlock.blue === undefined || colorForBlock.blue === null"}var g={red:Math.round(h.red),green:Math.round(h.green),blue:Math.round(h.blue)};if(g.red<0||g.red>255){throw"colorForBlock.red calculated < 0 or > 255, is = "+g.red}if(g.green<0||g.green>255){throw"colorForBlock.green calculated < 0 or > 255, is = "+g.green}if(g.blue<0||g.blue>255){throw"colorForBlock.blue calculated < 0 or > 255, is = "+g.blue}return g};b.prototype.getIdForSVG_js_item=function(g){var h=g.attr("id");return h};b.prototype.getJQueryObjForRawSVGFromSVG_js_item=function(g){if(g===undefined||g===null){throw"ERROR: SVG_js_item === undefined || SVG_js_item === null"}var h=$(g.node);return h};b.prototype.getSVG_js_itemForJQueryObj=function(h){if(h===undefined||h===null){throw"ERROR: $jQueryObj === undefined || $jQueryObj === null"}if(h.length===0){throw"ERROR: $jQueryObj.length === 0"}var g=h[0].instance;return g};b.prototype.addProgramaticDataStorageGroupOfRowsToJQueryItem=function(g){var h=new a();g.data(b.prototype.CONSTANTS.JQUERY_DATA_LABELS.JQUERY_DATA_LABEL_PROGRAMATIC,h);h.$item=g;return h};b.prototype.getProgramaticDataStorageGroupOfRowsFromJQueryItem=function(g){var h=g.data(b.prototype.CONSTANTS.JQUERY_DATA_LABELS.JQUERY_DATA_LABEL_PROGRAMATIC);if(h===undefined){}return h};b.prototype.addProgramaticDataStorageGroupOfRowsToSVG_js_Item=function(h){var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);return this.addProgramaticDataStorageGroupOfRowsToJQueryItem(g)};b.prototype.getProgramaticDataStorageGroupOfRowsFromSVG_js_Item=function(i){var h=this.getJQueryObjForRawSVGFromSVG_js_item(i);var g=this.getProgramaticDataStorageGroupOfRowsFromJQueryItem(h);return g};b.prototype.addProgramaticDataStorageToJQueryItem=function(g){var h=new d();g.data(b.prototype.CONSTANTS.JQUERY_DATA_LABELS.JQUERY_DATA_LABEL_PROGRAMATIC,h);h.$item=g;return h};b.prototype.getProgramaticDataStorageFromJQueryItem=function(g){var h=g.data(b.prototype.CONSTANTS.JQUERY_DATA_LABELS.JQUERY_DATA_LABEL_PROGRAMATIC);if(h===undefined){}return h};b.prototype.addProgramaticDataStorageToSVG_js_Item=function(h){var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);return this.addProgramaticDataStorageToJQueryItem(g)};b.prototype.getProgramaticDataStorageFromSVG_js_Item=function(i){var h=this.getJQueryObjForRawSVGFromSVG_js_item(i);var g=this.getProgramaticDataStorageFromJQueryItem(h);
return g};b.prototype.set_class_directly_OnSVGItem_using_jQuery=function(h,i){var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);g.attr("class",i)};b.prototype.set_attr_directly_OnSVGtextItem_using_jQuery=function(k,i,j){var h=this.getJQueryObjForRawSVGFromSVG_js_item(k);h.attr(i,j);var g=h.children("tspan");g.attr(i,j)};b.prototype.clearStyleAnd_dy_OnSVGtextItem=function(i){var h=this.getJQueryObjForRawSVGFromSVG_js_item(i);h.attr("style","");h.attr("dy","");var g=h.children("tspan");g.attr("style","");g.attr("dy","")};b.prototype.attachToolTipToJqueryHtmlNode=function(h,i,g){h.mouseenter(function(j){var k=i();Tip(k,DELAY,0);if(g&&g.mouseenter){g.mouseenter(this)}});h.mouseleave(function(j){UnTip();if(g&&g.mouseleave){g.mouseleave(this)}})};b.prototype.attachMouseOverVerticalLine=function(k){var h=k.verticalLineSVG;var l=k.lineData;var j=k.callbackFunctions;var i=this.getJQueryObjForRawSVGFromSVG_js_item(h);var g={vertLineData:l.vertLineData,linePos:l.linePos,callbackDataStorage:l.callbackDataStorage};this.attachToolTipToJqueryHtmlNode(i,function(o,n){var m=j.getLinesToolTipText(g);$(o).html(m);return m})};b.prototype.get$groupOfRowsFor$currentElement=function(h){var g="g."+b.prototype.CONSTANTS.CLASSES.PROT_COV_VIEWER_GROUP_OR_ROWS;var i=h.parent().closest(g);if(i.length===0){throw"Unable to find group of rows element using selector '"+g+"'."}return i};b.prototype.get$rowMainGroupFor$currentElement=function(h){var i="g."+b.prototype.CONSTANTS.CLASSES.PROT_COV_VIEWER_GROUP_ROW_MAIN;var g=h.parent().closest(i);if(g.length===0){throw"Unable to find main group element using selector '"+i+"'."}return g};b.prototype.attachClickShowHideToggleHiddenBlocksRow=function(h){var i=this;var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);g.click(function(j,k){i.clickShowHideToggleHiddenBlocksRow(j,k,this)})};b.prototype.setSVGTextPosition=function(h){var j=h.textSVG;var g=h.x;var n=h.y;var i=h.otherAttrsToSet;var m=h.additionalStyle;if(m===undefined||m===null){m=""}j.move(g,n);this.set_attr_directly_OnSVGtextItem_using_jQuery(j,"dy",".35em");this.set_attr_directly_OnSVGtextItem_using_jQuery(j,"style","font-size:"+this.configDisplayOptions.LABEL_FONT_SIZE+"px;font-family:Helvetica, Arial, sans-serif"+m);if(i!==undefined&&i!==null&&i instanceof Array&&i.length>0){for(var l=0;l<i.length;l++){var k=i[l];this.set_attr_directly_OnSVGtextItem_using_jQuery(j,k.attrName,k.attrValue)}}};b.prototype.add_callbackDataStorage_ToElementsIn_outputRows=function(h){for(var g=0;g<h.length;g++){var i=h[g];i.callbackDataStorage={}}};b.prototype.setupGroupOfRows=function(g){this.set_class_directly_OnSVGItem_using_jQuery(g,b.prototype.CONSTANTS.CLASSES.PROT_COV_VIEWER_GROUP_OR_ROWS);var h=this.addProgramaticDataStorageGroupOfRowsToSVG_js_Item(g);h.setSVGGroup(g);return h};b.prototype.setupRootGroupForEachRow=function(g){this.GLOBALS.arrayOfcurrentSVGgroupOfRowXandBelow.push(g);this.set_class_directly_OnSVGItem_using_jQuery(g,b.prototype.CONSTANTS.CLASSES.PROT_COV_VIEWER_GROUP_ROW_MAIN);return this.addProgramaticDataStorageToSVG_js_Item(g)};b.prototype.highlightBoxUnderEachRow=function(l){var m=this;var j=$(l.node);var i=this.get$rowMainGroupFor$currentElement(j);var k=m.getProgramaticDataStorageFromJQueryItem(i);var g=k.getMainBlocksBoxUnderEachRow();if(k.getHiddenBlocksVisible()){g=k.getHiddenBlocksBoxUnderEachRow()}if(g===undefined){return}var h=$(g.node);h.css({stroke:"lightgreen","stroke-width":5})};b.prototype.unhighlightBoxUnderEachRow=function(l){if(l===undefined){return}var j=$(l.node);var i=this.get$rowMainGroupFor$currentElement(j);var k=this.getProgramaticDataStorageFromJQueryItem(i);if(k===undefined){return}var g=k.getMainBlocksBoxUnderEachRow();if(k.getHiddenBlocksVisible()){g=k.getHiddenBlocksBoxUnderEachRow()}if(g===undefined){return}var h=$(g.node);h.css({stroke:"black","stroke-width":0})};b.prototype.addBoxUnderEachRowForMouseOver=function(i,k,j){var l=this;var m=(j*this.configDisplayOptions.ROW_HEIGHT);m=m+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var h=this.GLOBALS.masonViewerSVG.rect(this.GLOBALS.sequenceWidth,this.configDisplayOptions.BLOCK_HEIGHT);i.add(h);k.setMainBlocksBoxUnderEachRow(h);h.attr({fill:{r:255,g:255,b:255},stroke:{r:0,g:0,b:0},"stroke-width":0,"fill-opacity":0});h.attr("data-placement","mainBlocksBoxUnderEachMainRow");h.attr("rowIdx",j);h.move(this.configDisplayOptions.MAIN_BOX_STARTING_POSITION,m);this.addProgramaticDataStorageToSVG_js_Item(h);var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);g.hover(function(n){l.highlightBoxUnderEachRow(this.instance)},function(n){l.unhighlightBoxUnderEachRow(this.instance)})};b.prototype.addHiddenOrTotalsBlocksBoxUnderEachRowForMouseOver=function(o,g,k,l,h){var j=this;var n=(h*this.configDisplayOptions.ROW_HEIGHT);n=n+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var m=this.GLOBALS.masonViewerSVG.rect(this.GLOBALS.sequenceWidth,g);k.add(m);l.setHiddenBlocksBoxUnderEachRow(m);m.attr({fill:{r:255,g:255,b:255},stroke:{r:0,g:0,b:0},"stroke-width":0,"fill-opacity":0});m.attr("data-placement",o);m.attr("rowIdx",h);m.move(this.configDisplayOptions.MAIN_BOX_STARTING_POSITION,n);this.addProgramaticDataStorageToSVG_js_Item(m);var i=this.getJQueryObjForRawSVGFromSVG_js_item(m);i.hover(function(p){j.highlightBoxUnderEachRow(this.instance)},function(p){j.unhighlightBoxUnderEachRow(this.instance)});m.hide()};b.prototype.addHiddenBlocksBoxUnderEachRowForMouseOver=function(j,g,i,h){this.addHiddenOrTotalsBlocksBoxUnderEachRowForMouseOver("hiddenBlocksBoxUnderEachMainRow",j,g,i,h)};b.prototype.addTotalsBlocksBoxUnderEachRowForMouseOver=function(j,g,i,h){this.addHiddenOrTotalsBlocksBoxUnderEachRowForMouseOver("TotalsBlocksBoxUnderCombinedRow",j,g,i,h)};b.prototype.createHiddenBlocksContractionIcon=function(m,g,k,h){var i=this.GLOBALS.masonViewerSVG.group();g.add(i);i.attr("label","SVGGroupContractionIcon");this.attachClickShowHideToggleHiddenBlocksRow(i);i.attr("CreatedBy","createHiddenBlocksContractionIcon");var n=(k*this.configDisplayOptions.ROW_HEIGHT)+(this.configDisplayOptions.ROW_HEIGHT/4)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;
var j=this.GLOBALS.masonViewerSVG.rect(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2,this.configDisplayOptions.ROW_HEIGHT/2);j.attr({fill:{r:255,g:255,b:255},stroke:{r:255,g:0,b:0},"fill-opacity":0});j.move(this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4,n);this.attachToolTipToJqueryHtmlNode($(j.node),function(p,o){$(p).html(m);return m});var l=this.GLOBALS.masonViewerSVG.line(this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4)+2,n+this.configDisplayOptions.ROW_HEIGHT/4,this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH-(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2)+(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4)-2,n+this.configDisplayOptions.ROW_HEIGHT/4).stroke({color:"#f06",width:1});this.attachToolTipToJqueryHtmlNode($(l.node),function(p,o){$(p).html(m);return m});j.attr("cursor","pointer");l.attr("cursor","pointer");i.add(j);i.add(l)};b.prototype.createHiddenBlocksExpansionIcon=function(k,j,g,h){var i=this.GLOBALS.masonViewerSVG.group();i.attr("label","SVGGroupExpansionIcon");var n=this.GLOBALS.masonViewerSVG.set();j.add(i);this.attachClickShowHideToggleHiddenBlocksRow(i);h.setSVGGroupExpansionIcon(n);var l=(g*this.configDisplayOptions.ROW_HEIGHT)+(this.configDisplayOptions.ROW_HEIGHT/4)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var p=this.GLOBALS.masonViewerSVG.rect(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2,this.configDisplayOptions.ROW_HEIGHT/2);p.attr({fill:{r:255,g:255,b:255},stroke:{r:255,g:0,b:0},"fill-opacity":0});p.move(this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4,l);var m=this.GLOBALS.masonViewerSVG.line(this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2,l+2,this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2,l+this.configDisplayOptions.ROW_HEIGHT/2-2).stroke({color:"#f06",width:1});var o=this.GLOBALS.masonViewerSVG.line(this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4)+2,l+this.configDisplayOptions.ROW_HEIGHT/4,this.configDisplayOptions.ICON_EXPAND_ROW_STARTING_POSITION+this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH-(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/2)+(this.configDisplayOptions.ICON_EXPAND_ROW_WIDTH/4)-2,l+this.configDisplayOptions.ROW_HEIGHT/4).stroke({color:"#f06",width:1});p.attr("cursor","pointer");m.attr("cursor","pointer");o.attr("cursor","pointer");i.add(p);i.add(m);i.add(o);n.add(p);n.add(m);n.add(o);this.attachToolTipToJqueryHtmlNode($(p.node),function(r,q){$(r).html(k);return k});this.attachToolTipToJqueryHtmlNode($(m.node),function(r,q){$(r).html(k);return k});this.attachToolTipToJqueryHtmlNode($(o.node),function(r,q){$(r).html(k);return k})};b.prototype.addMouseOverToBlocks=function(h){var i=this;var g=this.getJQueryObjForRawSVGFromSVG_js_item(h);g.hover(function(j){var k=$(this);k.css({stroke:i.configDisplayOptions.BLOCK_HIGHLIGHT_BORDER_COLOR,"stroke-width":i.configDisplayOptions.BLOCK_HIGHLIGHT_BORDER_WIDTH});i.highlightBoxUnderEachRow(this.instance)},function(j){var k=$(this);k.css({stroke:"black","stroke-width":0});i.unhighlightBoxUnderEachRow(this.instance)})};b.prototype.addMouseOverToLinesInsideMainBox=function(i){var h=this;var g=this.getJQueryObjForRawSVGFromSVG_js_item(i);g.hover(function(j){h.highlightBoxUnderEachRow(this.instance)},function(j){h.unhighlightBoxUnderEachRow(this.instance)})};"use strict";b.prototype.clickShowHideToggleHiddenBlocksRow=function(w,t,v){var p=this;var o=$(v);var m=this.get$rowMainGroupFor$currentElement(o);var i=this.getProgramaticDataStorageFromJQueryItem(m);var q=i.getCreateHiddenBlocksIfNotCreatedCallback();q();var l=i.getHiddenBlocksForRowSet();if(l!==undefined&&l!==null){var r=i.getSVGRowXmainBlocksGROUP();var k=i.getHiddenBlocksHeight();var y=i.getSVGGroupExpansionIcon();var j=i.getMainBlocksBoxUnderEachRow();var u=i.getHiddenBlocksBoxUnderEachRow();var n=i.getGroupToMoveForExpansion();var s=true;if(n){s=false}if(i.getHiddenBlocksVisible()){l.hide();if(u!==undefined){u.hide()}if(j!==undefined){j.show()}if(r!==undefined){r.show()}y.show();var x=0;var h=function(){i.setHiddenBlocksVisible(false);var z={animateAdjustChildGroupOfRowsVerticalOffset:s,$rowMainGroup:m};p.adjustChildGroupOfRowsVerticalOffset(z);p.resizeOverallImageLength()};var g={SVGoGroupToMove:n,yToTransformTo:x,functionToRunAfterAnimate:h};if(n){this.animateTransformY(g)}else{h()}}else{if(r!==undefined){r.hide()}if(j!==undefined){j.hide()}var x=k;var h=function(){l.show();if(u!==undefined){u.show()}y.hide();i.setHiddenBlocksVisible(true);var z={animateAdjustChildGroupOfRowsVerticalOffset:s,$rowMainGroup:m};p.adjustChildGroupOfRowsVerticalOffset(z);p.resizeOverallImageLength()};var g={SVGoGroupToMove:n,yToTransformTo:x,functionToRunAfterAnimate:h};if(n){this.animateTransformY(g)}else{h()}}}return false};b.prototype.adjustChildGroupOfRowsVerticalOffset=function(m){var p=m.$rowMainGroup;var h=m.animateAdjustChildGroupOfRowsVerticalOffset;var l=this.get$groupOfRowsFor$currentElement(p);var k=this.getSVG_js_itemForJQueryObj(l);var n=this.getProgramaticDataStorageFromSVG_js_Item(k);var r=n.getNextProgramaticDataStorageGroupOfRows();if(r){var j=n.getFirstOutputRowSVGGroup();var q=0;while(j){var g=this.getProgramaticDataStorageFromSVG_js_Item(j);if(g.getHiddenBlocksVisible()){q+=g.getHiddenBlocksHeight()}j=g.getGroupToMoveForExpansion()}var o=r.getSVGGroup();if(h){var i={SVGoGroupToMove:o,yToTransformTo:q,functionToRunAfterAnimate:function(){}};this.animateTransformY(i)}else{o.transform({y:q})}}};"use strict";b.prototype.createMainLineHiddenBlocksIfNotCreatedCallbackCreator=function(j,g,i,h){var k=this;var l=function(){var m=i.getHiddenBlocksForRowSet();var o=i.getOutputRow();if(o!==undefined&&o!==null){var n=o.splitAnyEntries;
if(n&&(m===undefined||m===null)){k.processHiddenBlocksForRow(o,g,i,h)}}};i.setCreateHiddenBlocksIfNotCreatedCallback(l)};b.prototype.precomputeValuesOnCreateForMainRows=function(g){var k=this;for(var i=0;i<g.length;i++){var j=g[i];if(j.callbackDataStorage===undefined){j.callbackDataStorage={}}if(k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions&&k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.precomputeValuesOnCreate){var h={rowItem:j.inputRowItem,callbackDataStorage:j.callbackDataStorage};k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.precomputeValuesOnCreate(h)}}};b.prototype.processRowTotalBlockForRow=function(g,n,k){var m=this;if((!m.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions)||(!m.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.getColorAndSize)){return}var h={rowItem:g.inputRowItem,callbackDataStorage:g.callbackDataStorage};var l=m.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.getColorAndSize(h);var s=(k*this.configDisplayOptions.ROW_HEIGHT);s=s+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var r=l.blockSize;if(r>0){var p=l.colorForBlock;var j=this.convertBlockColorTo_SVGJS_FillColor(p);var o=r*this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH;if(o<this.configDisplayOptions.ROW_TOTAL_BLOCK_MINIMUM_SIZE){o=this.configDisplayOptions.ROW_TOTAL_BLOCK_MINIMUM_SIZE}var i=this.GLOBALS.masonViewerSVG.rect(o,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:j});i.move(this.GLOBALS.rowTotalsBarRightStartingPoint,s);this.addProgramaticDataStorageToSVG_js_Item(i);i.data("row-rowIdx",k);i.data("placement","row total blocks");n.add(i)}var q=this.GLOBALS.masonViewerSVG.rect(this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:{r:255,g:255,b:255},stroke:{r:0,g:0,b:0},"stroke-width":0.3,"fill-opacity":0});q.move(this.GLOBALS.rowTotalsBarRightStartingPoint,s);this.addProgramaticDataStorageToSVG_js_Item(q);this.attachMouseOverRowTotalBlock(q,g);this.attachClickHandlerRowTotalBlock(q,g);q.data("row-rowIdx",k);q.data("placement","row total blocks");n.add(q)};b.prototype.attachMouseOverMainRowLabel=function(h,i){var k=this;if((!k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions)||(!k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.getToolTipText)){return}var j=this.getJQueryObjForRawSVGFromSVG_js_item(h);var g={rowItem:i.inputRowItem,callbackDataStorage:i.callbackDataStorage};this.attachToolTipToJqueryHtmlNode(j,function(n,m){var l=k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.getToolTipText(g);$(n).html(l);return l})};b.prototype.attachClickHandlerMainRowLabel=function(g,i){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.processClick===undefined){return}var j=this.getJQueryObjForRawSVGFromSVG_js_item(g);var h={rowItem:i.inputRowItem,callbackDataStorage:i.callbackDataStorage};j.click(function(l){k.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.processClick(h)})};b.prototype.processLabelForRow=function(g,l,h){var i=this;var j=g.label;var o=this.GLOBALS.masonViewerSVG.text(j);this.addProgramaticDataStorageToSVG_js_Item(o);o.data("row-rowIdx",h);l.add(o);this.clearStyleAnd_dy_OnSVGtextItem(o);var m=(h*this.configDisplayOptions.ROW_HEIGHT)+(this.configDisplayOptions.ROW_HEIGHT/2);m=m+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var k="";if(i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.processClick){k="; cursor: pointer;"}this.setSVGTextPosition({textSVG:o,x:this.configDisplayOptions.LABEL_STARTING_POSITION,y:m,otherAttrsToSet:undefined,additionalStyle:k});var n=(h*this.configDisplayOptions.ROW_HEIGHT);n=n+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;if(i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.precomputeValuesOnCreate){var p={callbackDataStorage:g.callbackDataStorage,rowItem:g.inputRowItem};i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.precomputeValuesOnCreate(p)}if(i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.getToolTipText){this.attachMouseOverMainRowLabel(o,g)}if(i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsLabel_callbackFunctions.processClick){this.attachClickHandlerMainRowLabel(o,g)}return o};b.prototype.attachMouseOverBlockNonOverlappingBlocksRow=function(n,k,j){var l=this;if(l.constructorParams.callbackFunctionsObj===undefined||l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions===undefined||l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getNonOverlappingBlocksToolTipText===undefined){return}var i=this.getJQueryObjForRawSVGFromSVG_js_item(n);var g={startPos:k.blockStartPos,endPos:k.blockEndPos,blockDataItems:k.blockDataItems,rowItem:j.inputRowItem,callbackDataStorage:k.callbackDataStorage};var m=function(q,p){var o=l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getNonOverlappingBlocksToolTipText(g);$(q).html(o);return o};var h={mouseenter:function(o){l.callListenersForBlockMouseEnter({node:o,blockInfo:g})},mouseleave:function(o){l.callListenersForBlockMouseLeave({node:o,blockInfo:g})}};this.attachToolTipToJqueryHtmlNode(i,m,h)};b.prototype.attachMouseOverBlockOverlappingBlocksRow=function(n,k,j){var l=this;if(l.constructorParams.callbackFunctionsObj===undefined||l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions===undefined||l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getOverlappingBlocksToolTipText===undefined){return
}var i=this.getJQueryObjForRawSVGFromSVG_js_item(n);var g={startPos:k.blockStartPos,endPos:k.blockEndPos,blockDataItems:k.blockDataItems,rowItem:j.inputRowItem,callbackDataStorage:k.callbackDataStorage};var m=function(q,p){var o=l.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getOverlappingBlocksToolTipText(g);$(q).html(o);return o};var h={mouseenter:function(o){l.callListenersForBlockMouseEnter({node:o,blockInfo:g})},mouseleave:function(o){l.callListenersForBlockMouseLeave({node:o,blockInfo:g})}};this.attachToolTipToJqueryHtmlNode(i,m,h)};b.prototype.attachClickHandlerBlockNonOverlappingBlocks=function(l,j,i){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.processClick===undefined){return}var h=this.getJQueryObjForRawSVGFromSVG_js_item(l);var g={startPos:j.blockStartPos,endPos:j.blockEndPos,blockDataItems:j.blockDataItems,rowItem:i.inputRowItem,callbackDataStorage:j.callbackDataStorage};h.click(function(m){k.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.processClick(g)})};b.prototype.attachMouseOverRowTotalBlock=function(g,j){var k=this;if((!k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions)||(!k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.getTotalBarToolTipText)){return}var h=this.getJQueryObjForRawSVGFromSVG_js_item(g);var i={rowItem:j.inputRowItem,callbackDataStorage:j.callbackDataStorage};this.attachToolTipToJqueryHtmlNode(h,function(n,m){var l=k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.getTotalBarToolTipText(i);$(n).html(l);return l})};b.prototype.attachClickHandlerRowTotalBlock=function(g,j){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.processClick===undefined){return}var i=this.getJQueryObjForRawSVGFromSVG_js_item(g);var h={rowItem:j.inputRowItem,callbackDataStorage:j.callbackDataStorage};i.click(function(l){k.constructorParams.callbackFunctionsObj.rowTotalBar_callbackFunctions.processClick(h)})};b.prototype.getHiddenBlocksForRow=function(l){var s=[];var r=[];var u=[];var y=-1;var h=l.blockItems;for(var i=0;i<h.length;i++){var v=h[i];var x=v;var n=x.blockStartPos;var m=x.blockEndPos;var k=this.positionLeftEdgeToPixel(n);var j=this.positionRightEdgeToPixel(m);for(var q=0;q<=y;q++){if(v.blockStartPos===(r[q]+1)){k=u[q]+0.01}}v.blockStartPositionPixel=k;v.blockEndPositionPixel=j;var t=false;for(var o=0;o<s.length;o++){var p=s[o];var g=p[p.length-1];if(k>(g.blockEndPositionPixel)){t=true;p.push(v);break}}if(!t){var w=[];w.push(v);s.push(w)}y++;r[y]=v.blockEndPos;u[y]=j}return s};b.prototype.processHiddenBlocksForRow=function(l,B,t,E){var v=this;if(!v.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions||!v.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate){throw"callback function mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate is missing"}var F=this.GLOBALS.masonViewerSVG.group();F.attr("label","groupOfHiddenBlocksForRow");B.add(F);t.setHiddenBlocksForRowSet(F);var w=this.getHiddenBlocksForRow(l);var G=(w.length-1)*this.configDisplayOptions.ROW_HEIGHT;t.setHiddenBlocksHeight(G);var n=G+this.configDisplayOptions.ROW_HEIGHT;this.addHiddenBlocksBoxUnderEachRowForMouseOver(n,F,t,E);for(var o=0;o<w.length;o++){var r=w[o];var m=r;for(var A=0;A<m.length;A++){var D=m[A];D.callbackDataStorage={};var g={rowItem:l.inputRowItem,blockDataItems:D.blockDataItems,startPos:D.blockStartPos,endPos:D.blockEndPos,callbackDataStorage:D.callbackDataStorage,splitAnyEntriesForRow:false,forHiddenBlocks:true};v.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate(g);var u=D.blockStartPositionPixel+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;if(u<this.configDisplayOptions.MAIN_BOX_STARTING_POSITION){u=this.configDisplayOptions.MAIN_BOX_STARTING_POSITION}var s=((o)*this.configDisplayOptions.ROW_HEIGHT)+(E*this.configDisplayOptions.ROW_HEIGHT);s=s+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var i=D.blockEndPositionPixel-D.blockStartPositionPixel;var k={rowItem:l.inputRowItem,blockDataItems:D.blockDataItems,callbackDataStorage:D.callbackDataStorage,forHiddenBlocks:true};var h=v.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getColorForBlock(k);var p=this.convertBlockColorTo_SVGJS_FillColor(h);var z=this.GLOBALS.masonViewerSVG.rect(i,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:p});z.move(u,s);this.addMouseOverToBlocks(z);this.addProgramaticDataStorageToSVG_js_Item(z);z.data("row-rowIdx",E);z.data("placement","initially hidden row blocks");z.data("block-id",D.id);this.attachMouseOverBlockNonOverlappingBlocksRow(z,D,l);this.attachClickHandlerBlockNonOverlappingBlocks(z,D,l);F.add(z)}}var q=l.vertLinesItems;this.processHiddenLinesForRowVerticalLines(q,w,F,E);this.showHideAllVerticalDataLinesPer_GLOBALS_showVerticalDataLines();var C=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX,((E)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.leftLineX,(((E+1)*this.configDisplayOptions.ROW_HEIGHT)+G)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});var j=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.rightLineX,((E)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX,(((E+1)*this.configDisplayOptions.ROW_HEIGHT)+G)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});
C.data("placement","lines with initially hidden row blocks");j.data("placement","lines with initially hidden row blocks");F.add(C);F.add(j);this.createHiddenBlocksContractionIcon(this.configDisplayOptions.CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT,F,E,t)};b.prototype.processHiddenLinesForRowVerticalLines=function(m,j,g,q){var i=this;if(m&&m.length>0&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.getColorForLine){for(var n=0;n<j.length;n++){for(var l=0;l<m.length;l++){var k=m[l];k.callbackDataStorage={};if(i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate){var v={vertLineData:k.vertLineData,linePos:k.linePos,forHiddenLines:true,callbackDataStorage:k.callbackDataStorage};i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate(v)}var t=k.linePos;var p=this.positionCharPositionToPixel(t);var s=p+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var r=((n)*this.configDisplayOptions.ROW_HEIGHT)+(q*this.configDisplayOptions.ROW_HEIGHT);r=r+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var u={vertLineData:k.vertLineData,callbackDataStorage:k.callbackDataStorage,forHiddenLines:true};var w=i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.getColorForLine(u);this.isValidColor(w);var o=this.GLOBALS.masonViewerSVG.line(s,r,s,r+this.configDisplayOptions.BLOCK_HEIGHT).stroke({color:w,width:this.configDisplayOptions.BORDER_WIDTH});this.GLOBALS.setSVGVerticalDataLines.add(o);this.addMouseOverToLinesInsideMainBox(o);this.addProgramaticDataStorageToSVG_js_Item(o);o.data("rowOffset_hiddenBlockRowIdx",q+"_"+n);o.data("placement","primary row lines");o.data("block-id",k.id);var h={verticalLineSVG:o,lineData:k,callbackFunctions:i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions};this.attachMouseOverVerticalLine(h);g.add(o)}}}};b.prototype.processMainLineBlocksForRow=function(o,C,B,k){var z=this;if(!z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions||!z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate){throw"callback function mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate is missing"}if(!z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions||!z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getColorForBlock){throw"callback function mainRowsBlocks_callbackFunctions.getColorForBlock is missing"}var F=o.mainLineBlocks;if(F.length>0){var u=o.splitAnyEntries;for(var t=0;t<F.length;t++){var E=F[t];E.callbackDataStorage={};var g={rowItem:o.inputRowItem,blockDataItems:E.blockDataItems,startPos:E.blockStartPos,endPos:E.blockEndPos,callbackDataStorage:E.callbackDataStorage,splitAnyEntriesForRow:u,forHiddenBlocks:false};z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.precomputeValuesOnCreate(g);var q=E.blockStartPos;var p=E.blockEndPos;var n=this.positionLeftEdgeToPixel(q);var j=this.positionRightEdgeToPixel(p);var i=j-n;var w=n+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var v=(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var m={rowItem:o.inputRowItem,blockDataItems:E.blockDataItems,callbackDataStorage:E.callbackDataStorage,forHiddenBlocks:false};var h=z.constructorParams.callbackFunctionsObj.mainRowsBlocks_callbackFunctions.getColorForBlock(m);var r=this.convertBlockColorTo_SVGJS_FillColor(h);var A=this.GLOBALS.masonViewerSVG.rect(i,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:r});A.move(w,v);this.addMouseOverToBlocks(A);this.addProgramaticDataStorageToSVG_js_Item(A);A.data("row-rowIdx",k);A.data("placement","primary row blocks");A.data("block-id",E.id);if(u){this.attachMouseOverBlockOverlappingBlocksRow(A,E,o)}else{this.attachMouseOverBlockNonOverlappingBlocksRow(A,E,o);this.attachClickHandlerBlockNonOverlappingBlocks(A,E,o)}B.add(A)}}var s=o.vertLinesItems;this.processMainLineVerticalLines(s,B,k);var D=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX,(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.leftLineX,((k+1)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});var l=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.rightLineX,(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX,((k+1)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});D.data("placement","lines with primary row blocks");l.data("placement","lines with primary row blocks");C.add(D);C.add(l)};b.prototype.processMainLineVerticalLines=function(l,o,g){var i=this;if(l&&l.length>0&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.getColorForLine){for(var k=0;k<l.length;k++){var j=l[k];j.callbackDataStorage={};if(i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions&&i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate){var t={vertLineData:j.vertLineData,linePos:j.linePos,forHiddenLines:false,callbackDataStorage:j.callbackDataStorage};i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.precomputeValuesOnCreate(t)}var r=j.linePos;var n=this.positionCharPositionToPixel(r);var q=n+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;
var p=(g*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var s={vertLineData:j.vertLineData,callbackDataStorage:j.callbackDataStorage,forHiddenLines:false};var u=i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions.getColorForLine(s);this.isValidColor(u);var m=this.GLOBALS.masonViewerSVG.line(q,p,q,p+this.configDisplayOptions.BLOCK_HEIGHT).stroke({color:u,width:this.configDisplayOptions.BORDER_WIDTH});this.GLOBALS.setSVGVerticalDataLines.add(m);this.addMouseOverToLinesInsideMainBox(m);this.addProgramaticDataStorageToSVG_js_Item(m);m.data("row-rowIdx",g);m.data("placement","primary row lines");m.data("block-id",j.id);var h={verticalLineSVG:m,lineData:j,callbackFunctions:i.constructorParams.callbackFunctionsObj.mainRowsVerticalLines_callbackFunctions};this.attachMouseOverVerticalLine(h);o.add(m)}}};"use strict";b.prototype.positionLeftEdgeToPixel=function(h){h-=0.5;var g=this.positionPrivateCharPosToPixel(h);return g};b.prototype.positionRightEdgeToPixel=function(h){h+=0.5;var g=this.positionPrivateCharPosToPixel(h);return g};b.prototype.positionCharPositionToPixel=function(h){var g=this.positionPrivateCharPosToPixel(h);return g};b.prototype.positionPrivateCharPosToPixel=function(h){h=this.limitCharPositionMaxSeqLength(h);h-=0.5;var g=(h*this.GLOBALS.sequenceMultiplier);return g};b.prototype.limitCharPositionMaxSeqLength=function(g){var i=0.5;var h=this.constructorParams.requestParams.inputData.maxSequenceLength+0.5;if(g<i){g=i}else{if(g>h){g=h}}return g};"use strict";b.prototype.attachMouseOverBlockTotalsOverlappingBlocksRow=function(m,j){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getBlocksToolTipText===undefined){return}var i=this.getJQueryObjForRawSVGFromSVG_js_item(m);var g={startPos:j.blockStartPos,endPos:j.blockEndPos,blockDataItems:j.blockDataItems,callbackDataStorage:j.callbackDataStorage};var l=function(p,o){var n=k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getBlocksToolTipText(g);$(p).html(n);return n};var h={mouseenter:function(n){k.callListenersForBlockMouseEnter({node:n,blockInfo:g})},mouseleave:function(n){k.callListenersForBlockMouseLeave({node:n,blockInfo:g})}};this.attachToolTipToJqueryHtmlNode(i,l,h)};b.prototype.attachMouseOverBlockTotalsNonOverlappingBlocksRow=function(m,j){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getBlocksToolTipText===undefined){return}var i=this.getJQueryObjForRawSVGFromSVG_js_item(m);var g={startPos:j.blockStartPos,endPos:j.blockEndPos,blockDataItems:j.blockDataItems,callbackDataStorage:j.callbackDataStorage};var l=function(p,o){var n=k.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getBlocksToolTipText(g);$(p).html(n);return n};var h={mouseenter:function(n){k.callListenersForBlockMouseEnter({node:n,blockInfo:g})},mouseleave:function(n){k.callListenersForBlockMouseLeave({node:n,blockInfo:g})}};this.attachToolTipToJqueryHtmlNode(i,l,h)};b.prototype.attachClickHandlerBlockCombinedRow=function(k,i){var j=this;if(j.constructorParams.callbackFunctionsObj===undefined||j.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions===undefined||j.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.processClick===undefined){return}var h=this.getJQueryObjForRawSVGFromSVG_js_item(k);var g={startPos:i.blockStartPos,endPos:i.blockEndPos,blockDataItems:i.blockDataItems,callbackDataStorage:i.callbackDataStorage};h.click(function(l){j.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.processClick(g)})};b.prototype.attachMouseOverCombinedRowTotalBlock=function(h,g){var j=this;if(j.constructorParams.callbackFunctionsObj===undefined||j.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions===undefined||j.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.getTotalBarToolTipText===undefined){return}var i=this.getJQueryObjForRawSVGFromSVG_js_item(h);var k={callbackDataStorage:g};this.attachToolTipToJqueryHtmlNode(i,function(n,m){var l=j.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.getTotalBarToolTipText(k);$(n).html(l);return l})};b.prototype.attachClickHandlerCombinedRowTotalBlock=function(h,g){var k=this;if(k.constructorParams.callbackFunctionsObj===undefined||k.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions===undefined||k.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.processClick===undefined){return}var j=this.getJQueryObjForRawSVGFromSVG_js_item(h);var i={callbackDataStorage:g};j.click(function(l){k.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.processClick(i)})};b.prototype.processCombinedRow=function(j,g,i,h){i.attr("class","prot_cov_viewer_group_row_main");i.attr("label","Totals Row Group");var k=this.combineTotalsBlocksWhereStartEndMatch(j);var p=this.constructorParams.objectThisMasonViewerPerInstance.combineOverlapsProteinPositionBased(k);var o=p.splitAnyEntries;var n=p.outputList;this.processTotalsLabel(g,o,i,h);this.addBoxUnderEachRowForMouseOver(i,h,g);var m={mainLineTotalBlocks:n,combinedBlockItems:k,splitAnyEntries:o};var l=this.GLOBALS.masonViewerSVG.group();i.add(l);l.attr("label","SVGRowXmainBlocksGROUP_processCombinedRow");h.setSVGRowXmainBlocksGROUP(l);this.processCombinedRowMainLineBlocks(m,i,l,g);if(o){this.createTotalsLineHiddenBlocksIfNotCreatedCallbackCreator(g,k,p.splitAnyEntries,i,h)}this.processRowTotalBlockForCombinedRow(g,i,h)};b.prototype.createTotalsLineHiddenBlocksIfNotCreatedCallbackCreator=function(j,i,k,g,h){var l=this;var m=function(){var n=h.getHiddenBlocksForRowSet();
if(k&&(n===undefined||n===null)){l.processCombinedRowHiddenBlocks(j,i,k,g,h)}};h.setCreateHiddenBlocksIfNotCreatedCallback(m)};b.prototype.processTotalsLabel=function(h,r,m,i){var j=this;var k=this.configDisplayOptions.combinedLineLabel;var q=this.GLOBALS.masonViewerSVG.text(k);this.addProgramaticDataStorageToSVG_js_Item(q);q.data("Totals-Label","");m.add(q);j.clearStyleAnd_dy_OnSVGtextItem(q);var n=(h*this.configDisplayOptions.ROW_HEIGHT)+(this.configDisplayOptions.ROW_HEIGHT/2);n=n+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var l="";this.setSVGTextPosition({textSVG:q,x:this.configDisplayOptions.LABEL_STARTING_POSITION,y:n,otherAttrsToSet:undefined,additionalStyle:l});var p=(h*this.configDisplayOptions.ROW_HEIGHT);p=p+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;if(this.configDisplayOptions.combinedLineTooltipHTML){var g=this.configDisplayOptions.combinedLineTooltipHTML;var o=this.getJQueryObjForRawSVGFromSVG_js_item(q);this.attachToolTipToJqueryHtmlNode(o,function(u,t){var s=g;$(u).html(s);return s})}if(r){this.createHiddenBlocksExpansionIcon(this.configDisplayOptions.CLICK_TO_EXPAND_TO_SHOW_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT,m,h,i)}};b.prototype.combineTotalsBlocksWhereStartEndMatch=function(k){var o=[];var h=[];for(var i=0;i<k.length;i++){var g=k[i];var p=g.blockItems;for(var m=0;m<p.length;m++){var n=p[m];h.push(n)}}for(var m=0;m<h.length;m++){var n=h[m];if(n!==null){for(var l=m+1;l<h.length;l++){var j=h[l];if(j!==null){if(n.blockStartPos===j.blockStartPos&&n.blockEndPos===j.blockEndPos){n.blockDataItems=n.blockDataItems.concat(j.blockDataItems);h[l]=null}}}o.push(n)}}o.sort(this.constructorParams.objectThisMasonViewerPerInstance.combineOverlaps_Z_compareForSortBlocks);return o};b.prototype.placeTotalsBlocksIntoRows=function(h){var t=[];var q=[];var u=[];var x=-1;for(var i=0;i<h.length;i++){var v=h[i];var w=v;var m=w.blockStartPos;var l=w.blockEndPos;var k=this.positionLeftEdgeToPixel(m);var j=this.positionRightEdgeToPixel(l);for(var p=0;p<=x;p++){if(v.blockStartPos===(q[p]+1)){k=u[p]+0.01}}v.totalBlockStartPositionPixel=k;v.totalBlockEndPositionPixel=j;var r=false;for(var n=0;n<t.length;n++){var o=t[n];var g=o[o.length-1];if(k>(g.totalBlockEndPositionPixel)){r=true;o.push(v);break}}if(!r){var s=[];s.push(v);t.push(s)}x++;q[x]=v.blockEndPos;u[x]=j}return t};b.prototype.processCombinedRowMainLineBlocks=function(p,C,B,k){var z=this;if(!z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions||!z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.precomputeValuesOnCreate){throw"callback function combinedRow_callbackFunctions.precomputeValuesOnCreate is missing"}if(!z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions||!z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getColorForBlock){throw"callback function combinedRow_callbackFunctions.getColorForBlock is missing"}var F=p.mainLineTotalBlocks;if(F.length>0){var u=p.splitAnyEntries;for(var t=0;t<F.length;t++){var E=F[t];E.callbackDataStorage={};var g={blockDataItems:E.blockDataItems,startPos:E.blockStartPos,endPos:E.blockEndPos,splitAnyEntriesForRow:u,callbackDataStorage:E.callbackDataStorage};z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.precomputeValuesOnCreate(g);var r=E.blockStartPos;var q=E.blockEndPos;var o=this.positionLeftEdgeToPixel(r);var j=this.positionRightEdgeToPixel(q);var i=j-o;var w=o+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var v=(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var n={blockDataItems:E.blockDataItems,callbackDataStorage:E.callbackDataStorage};var h=z.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getColorForBlock(n);var s=this.convertBlockColorTo_SVGJS_FillColor(h);var A=this.GLOBALS.masonViewerSVG.rect(i,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:s});A.move(w,v);this.addMouseOverToBlocks(A);this.addProgramaticDataStorageToSVG_js_Item(A);A.data("row-rowIdx",k);A.data("placement","primary row blocks");A.data("block-id",E.id);if(u){this.attachMouseOverBlockTotalsOverlappingBlocksRow(A,E,p)}else{this.attachMouseOverBlockTotalsNonOverlappingBlocksRow(A,E,p);this.attachClickHandlerBlockCombinedRow(A,E,p)}B.add(A)}}var m=this.constructorParams.requestParams.inputData.vertLinesCombinedRow;this.processCombinedRowMainLineVerticalLines(m,B,k);var D=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX,(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.leftLineX,((k+1)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});var l=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.rightLineX,(k*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX,((k+1)*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});D.data("placement","left edge line for primary totals row blocks");l.data("placement","right edge line for primary totals row blocks");C.add(D);C.add(l)};b.prototype.processCombinedRowMainLineVerticalLines=function(h,n,g){var j=this;if(h&&h.length>0&&j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions&&j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.getColorForLine){for(var p=0;p<h.length;p++){var k=h[p];k.callbackDataStorage={};if(j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions&&j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.precomputeValuesOnCreate){var t={vertLineData:k.vertLineData,linePos:k.linePos,forHiddenLines:false,callbackDataStorage:k.callbackDataStorage};
j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.precomputeValuesOnCreate(t)}var r=k.linePos;var m=this.positionCharPositionToPixel(r);var q=m+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var o=(g*this.configDisplayOptions.ROW_HEIGHT)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var s={vertLineData:k.vertLineData,callbackDataStorage:k.callbackDataStorage,forHiddenLines:false};var u=j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.getColorForLine(s);this.isValidColor(u);var l=this.GLOBALS.masonViewerSVG.line(q,o,q,o+this.configDisplayOptions.BLOCK_HEIGHT).stroke({color:u,width:this.configDisplayOptions.BORDER_WIDTH});this.GLOBALS.setSVGVerticalDataLines.add(l);this.addProgramaticDataStorageToSVG_js_Item(l);l.data("row-rowIdx",g);l.data("placement","primary totals row lines");l.data("block-id",k.id);var i={verticalLineSVG:l,lineData:k,callbackFunctions:j.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions};this.attachMouseOverVerticalLine(i);n.add(l)}}};b.prototype.processCombinedRowHiddenBlocks=function(l,p,t,F,v){var A=this;if(!A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions||!A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.precomputeValuesOnCreate){throw"callback function combinedRow_callbackFunctions.precomputeValuesOnCreate is missing"}if(!A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions||!A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getColorForBlock){throw"callback function combinedRow_callbackFunctions.getColorForBlock is missing"}var k=this.GLOBALS.masonViewerSVG.group();F.add(k);k.attr("label","groupOfTotalsHiddenBlocksForRow_processCombinedRow");v.setHiddenBlocksForRowSet(k);var j=l*this.configDisplayOptions.ROW_HEIGHT;var C=this.placeTotalsBlocksIntoRows(p);var D=C.length*this.configDisplayOptions.ROW_HEIGHT;var s=(C.length-1)*this.configDisplayOptions.ROW_HEIGHT;v.setHiddenBlocksHeight(s);this.addTotalsBlocksBoxUnderEachRowForMouseOver(D,k,v,l);for(var G=0;G<C.length;G++){var q=C[G];var E=q;for(var z=0;z<E.length;z++){var I=E[z];I.callbackDataStorage={};var g={blockDataItems:I.blockDataItems,startPos:I.blockStartPos,endPos:I.blockEndPos,splitAnyEntriesForRow:false,forHiddenBlocks:true,callbackDataStorage:I.callbackDataStorage};A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.precomputeValuesOnCreate(g)}}for(var G=0;G<C.length;G++){var q=C[G];var E=q;for(var z=0;z<E.length;z++){var I=E[z];var w=I.totalBlockStartPositionPixel+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;if(w<this.configDisplayOptions.MAIN_BOX_STARTING_POSITION){w=this.configDisplayOptions.MAIN_BOX_STARTING_POSITION}var u=((G)*this.configDisplayOptions.ROW_HEIGHT)+(j);u=u+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var i=I.totalBlockEndPositionPixel-I.totalBlockStartPositionPixel;var o={blockDataItems:I.blockDataItems,callbackDataStorage:I.callbackDataStorage};var h=A.constructorParams.callbackFunctionsObj.combinedRow_callbackFunctions.getColorForBlock(o);var r=this.convertBlockColorTo_SVGJS_FillColor(h);var B=this.GLOBALS.masonViewerSVG.rect(i,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:r});B.move(w,u);this.addMouseOverToBlocks(B);this.addProgramaticDataStorageToSVG_js_Item(B);B.data("row-rowIdx",l);B.data("placement","initially hidden total row blocks");B.data("block-id",I.id);this.attachMouseOverBlockTotalsNonOverlappingBlocksRow(B,I);this.attachClickHandlerBlockCombinedRow(B,I);F.add(B);k.add(B)}}var n=this.constructorParams.requestParams.inputData.vertLinesCombinedRow;this.processCombinedRowHiddenLinesVerticalLines(n,C,k,l);this.showHideAllVerticalDataLinesPer_GLOBALS_showVerticalDataLines();var H=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.leftLineX,(j)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.leftLineX,((j)+D)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});var m=this.GLOBALS.masonViewerSVG.line(this.GLOBALS.rightLineX,(j)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE,this.GLOBALS.rightLineX,((j)+D)+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE).stroke({color:this.configDisplayOptions.BORDER_COLOR,width:this.configDisplayOptions.BORDER_WIDTH});k.add(H);k.add(m);this.createHiddenBlocksContractionIcon(this.configDisplayOptions.CLICK_TO_CONTRACT_TO_HIDE_INDIVIDUAL_BLOCKS_TOOLTIP_TEXT,k,l,v);k.hide()};b.prototype.processCombinedRowHiddenLinesVerticalLines=function(h,i,q,g){var k=this;if(h&&h.length>0&&k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions&&k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.getColorForLine){for(var n=0;n<i.length;n++){for(var r=0;r<h.length;r++){var l=h[r];l.callbackDataStorage={};if(k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions&&k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.precomputeValuesOnCreate){var v={vertLineData:l.vertLineData,linePos:l.linePos,forHiddenLines:true,callbackDataStorage:l.callbackDataStorage};k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.precomputeValuesOnCreate(v)}var t=l.linePos;var o=this.positionCharPositionToPixel(t);var s=o+this.configDisplayOptions.MAIN_BOX_STARTING_POSITION;var p=((n)*this.configDisplayOptions.ROW_HEIGHT)+(g*this.configDisplayOptions.ROW_HEIGHT);p=p+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var u={vertLineData:l.vertLineData,callbackDataStorage:l.callbackDataStorage,forHiddenLines:false};var w=k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions.getColorForLine(u);this.isValidColor(w);var m=this.GLOBALS.masonViewerSVG.line(s,p,s,p+this.configDisplayOptions.BLOCK_HEIGHT).stroke({color:w,width:this.configDisplayOptions.BORDER_WIDTH});
this.GLOBALS.setSVGVerticalDataLines.add(m);this.addMouseOverToLinesInsideMainBox(m);this.addProgramaticDataStorageToSVG_js_Item(m);m.data("rowIdx_combinedRowLinesIdx",g+"_"+r);m.data("placement","initally hidden totals row lines");m.data("block-id",l.id);var j={verticalLineSVG:m,lineData:l,callbackFunctions:k.constructorParams.callbackFunctionsObj.combinedRowVerticalLines_callbackFunctions};this.attachMouseOverVerticalLine(j);q.add(m)}}}};b.prototype.processRowTotalBlockForCombinedRow=function(j,n,l){var m=this;if(m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions===undefined||m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions===null){return}if(m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.precomputeValuesOnCreate===undefined||m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.precomputeValuesOnCreate===null){return}if(m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.getColorAndSize===undefined||m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.getColorAndSize===null){return}var q={};var u={callbackDataStorage:q};m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.precomputeValuesOnCreate(u);var g={callbackDataStorage:q};var k=m.constructorParams.callbackFunctionsObj.combinedRowTotalBar_callbackFunctions.getColorAndSize(g);var t=(j*this.configDisplayOptions.ROW_HEIGHT);t=t+this.configDisplayOptions.TOP_ROW_OFFSET_FROM_TOP_OF_IMAGE;var s=k.blockSize;if(s>0){var p=k.colorForBlock;var i=this.convertBlockColorTo_SVGJS_FillColor(p);var o=s*this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH;if(o<this.configDisplayOptions.ROW_TOTAL_BLOCK_MINIMUM_SIZE){o=this.configDisplayOptions.ROW_TOTAL_BLOCK_MINIMUM_SIZE}var h=this.GLOBALS.masonViewerSVG.rect(o,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:i});h.move(this.GLOBALS.rowTotalsBarRightStartingPoint,t);this.addProgramaticDataStorageToSVG_js_Item(h);h.data("row-rowIdx",j);h.data("placement","totals row: row total blocks");n.add(h)}var r=this.GLOBALS.masonViewerSVG.rect(this.configDisplayOptions.ROW_TOTALS_BAR_RIGHT_MAX_WIDTH,this.configDisplayOptions.BLOCK_HEIGHT).attr({fill:{r:255,g:255,b:255},stroke:{r:0,g:0,b:0},"stroke-width":0.3,"fill-opacity":0});r.move(this.GLOBALS.rowTotalsBarRightStartingPoint,t);this.addProgramaticDataStorageToSVG_js_Item(r);this.attachMouseOverCombinedRowTotalBlock(r,q);this.attachClickHandlerCombinedRowTotalBlock(r,q);r.data("row-rowIdx",j);r.data("placement","totals row: row total blocks clear overlay");n.add(r)}})(window);